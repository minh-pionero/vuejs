import{d as x,r as n,o as v,b as y,h as a,t as V,a as e,w as l,c as k,e as M,F as B,p as G,k as H,_ as J,l as q,i as h,m as K,n as F,q as Q,f as b,u as w,s as W,v as X}from"./index-057900fe.js";const Y={class:"py-2"},Z={class:"d-flex"},ee=x({__name:"ProductTableRow",props:{product:{type:Object,required:!0}},setup(o){return(c,u)=>{const s=n("VImg"),p=n("VIcon"),r=n("VBtn");return v(),y("tr",null,[a("td",null,V(o.product.categoryId),1),a("td",null,[a("div",Y,[e(s,{src:o.product.thumbnail,width:"150"},null,8,["src"])])]),a("td",null,V(o.product.name),1),a("td",null,V(o.product.price),1),a("td",null,[a("div",Z,[e(r,{color:"orange",class:"mr-2"},{default:l(()=>[e(p,{icon:"mdi-square-edit-outline"})]),_:1}),e(r,{color:"red"},{default:l(()=>[e(p,{icon:"mdi-trash-can-outline"})]),_:1})])])])}}}),te=o=>(G("data-v-d0b26c21"),o=o(),H(),o),oe=te(()=>a("thead",{class:"bg-grey-lighten-4 z-index-1"},[a("tr",null,[a("th",{class:"text-left"},"Category"),a("th",{class:"text-left"},"Thumbnail"),a("th",{class:"text-left"},"Name"),a("th",{class:"text-left"},"Price"),a("th",null,"Action")])],-1)),ne={key:0},ae={colspan:"5"},le={class:"text-center my-16"},se=x({__name:"ProductTable",props:{isLoading:{type:Boolean,required:!0,default:!1},products:{type:Array,required:!0,default:()=>[]}},setup(o){return(c,u)=>{const s=n("v-progress-circular"),p=n("v-table");return v(),k(p,{class:"border","fixed-header":"",height:700,hover:""},{default:l(()=>[oe,a("tbody",null,[o.isLoading?(v(),y("tr",ne,[a("td",ae,[a("div",le,[e(s,{size:50,indeterminate:""})])])])):(v(!0),y(B,{key:1},M(o.products,r=>(v(),k(ee,{key:r,product:r},null,8,["product"]))),128))])]),_:1})}}});const re=J(se,[["__scopeId","data-v-d0b26c21"]]),ce=o=>q.get(`/products?page=${o}`).then(c=>c.data),ie=o=>q.post("/products",o).then(c=>c.data),de=()=>q.get("/product-categories").then(o=>o.data),ue=()=>({ruleRequired:(o,c,u)=>{let s="Required";return u?s=u:c&&(s=`${`${c} is required`}`),!!o||s}}),pe={class:"pa-2"},_e={class:"mb-6"},me=x({__name:"ProductEditDialog",props:{isOpenDialog:{type:Boolean,required:!0,default:!1},onCloseDialog:{type:Function,required:!0},product:{type:Object,required:!1,default:null},onRefreshProducts:{type:Function,required:!0}},setup(o){const c=o,{ruleRequired:u}=ue(),s=h(!1),p=h([]),r={name:null,category_id:null,price:null,thumbnail:"https://kenh14cdn.com/thumb_w/660/2020/7/17/brvn-15950048783381206275371.jpg",images:"",is_active:!0,short_description:"",description:"",source:"",preview_source_url:"",is_virtual_product:!1},t=K(r),_=async()=>{try{const{data:i}=await de();p.value=i.map(({id:d,name:f})=>({value:d,title:f}))}catch{}};F(()=>{_()});const P=async()=>{try{s.value=!0;const i=new FormData;i.append("name",t.name??""),i.append("category_id",t.category_id??""),i.append("price",t.price??""),i.append("thumbnail",t.thumbnail),t.short_description&&i.append("short_description",t.short_description),t.description&&i.append("description",t.description),await ie(i),c.onCloseDialog(),C(),c.onRefreshProducts()}catch{}finally{s.value=!1}},C=()=>{t.name=r.name,t.category_id=r.category_id,t.price=r.price,t.short_description=r.short_description,t.description=r.description};return(i,d)=>{const f=n("v-icon"),g=n("v-btn"),R=n("v-toolbar-title"),T=n("v-spacer"),U=n("v-toolbar-items"),j=n("v-toolbar"),$=n("v-text-field"),D=n("v-textarea"),I=n("v-col"),A=n("v-select"),S=n("VIcon"),N=n("v-row"),O=n("v-container"),L=n("v-form"),z=n("v-card"),E=n("v-dialog");return v(),k(E,{fullscreen:"",transition:"dialog-bottom-transition",scrim:!1,"model-value":o.isOpenDialog},{default:l(()=>[e(z,null,{default:l(()=>[e(L,{onSubmit:Q(P,["prevent"])},{default:l(()=>[e(j,{dark:"",color:"blue"},{default:l(()=>[e(g,{icon:"",dark:"",onClick:o.onCloseDialog,disabled:s.value},{default:l(()=>[e(f,null,{default:l(()=>[b("mdi-close")]),_:1})]),_:1},8,["onClick","disabled"]),e(R,null,{default:l(()=>[b(V(o.product?"Update product":"Create product"),1)]),_:1}),e(T),e(U,null,{default:l(()=>[e(g,{variant:"text",type:"submit",loading:s.value},{default:l(()=>[b(" Save ")]),_:1},8,["loading"])]),_:1})]),_:1}),a("div",pe,[e(O,{fluid:""},{default:l(()=>[e(N,null,{default:l(()=>[e(I,{cols:"12",md:"8"},{default:l(()=>[e($,{label:"Name",variant:"outlined",modelValue:t.name,"onUpdate:modelValue":d[0]||(d[0]=m=>t.name=m),rules:[w(u)]},null,8,["modelValue","rules"]),e($,{label:"Price",variant:"outlined",type:"number",modelValue:t.price,"onUpdate:modelValue":d[1]||(d[1]=m=>t.price=m),rules:[w(u)]},null,8,["modelValue","rules"]),e(D,{label:"Short description",variant:"outlined",modelValue:t.short_description,"onUpdate:modelValue":d[2]||(d[2]=m=>t.short_description=m)},null,8,["modelValue"]),e(D,{label:"Description",variant:"outlined",modelValue:t.description,"onUpdate:modelValue":d[3]||(d[3]=m=>t.description=m)},null,8,["modelValue"])]),_:1}),e(I,{cols:"12",md:"4"},{default:l(()=>[e(A,{label:"Category",items:p.value,variant:"outlined",modelValue:t.category_id,"onUpdate:modelValue":d[4]||(d[4]=m=>t.category_id=m),rules:[w(u)]},null,8,["items","modelValue","rules"]),a("div",_e,[e(g,null,{default:l(()=>[e(S,{icon:"mdi-paperclip"}),b("Choose Thumbnail ")]),_:1})]),a("div",null,[e(g,null,{default:l(()=>[e(S,{icon:"mdi-paperclip"}),b("Choose Images ")]),_:1})])]),_:1})]),_:1})]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["model-value"])}}}),ve={class:"d-flex justify-space-between mb-3"},fe=a("div",{class:"text-h5"},"Products",-1),ge={key:0,class:"d-flex justify-end mt-2"},he=x({__name:"ProductPage",setup(o){const c=h(!1),u=h(!1),s=h(1),p=h(),r=async t=>{try{c.value=!0;const _=await ce(t??0);p.value=_}catch{}finally{c.value=!1}};return F(()=>{r()}),W(s,t=>{r(t)}),(t,_)=>{var i,d,f;const P=n("v-btn"),C=n("VPagination");return v(),y(B,null,[a("div",ve,[fe,e(P,{onClick:_[0]||(_[0]=()=>{u.value=!0})},{default:l(()=>[b("Create product")]),_:1})]),e(re,{products:((i=p.value)==null?void 0:i.data)??[],"is-loading":c.value},null,8,["products","is-loading"]),(d=p.value)!=null&&d.meta.last_page?(v(),y("div",ge,[e(C,{modelValue:s.value,"onUpdate:modelValue":_[1]||(_[1]=g=>s.value=g),length:(f=p.value)==null?void 0:f.meta.last_page,"total-visible":7,size:40},null,8,["modelValue","length"])])):X("",!0),e(me,{"is-open-dialog":u.value,"on-close-dialog":()=>{u.value=!1},"on-refresh-products":r},null,8,["is-open-dialog","on-close-dialog"])],64)}}});export{he as default};
